{"version":3,"file":"geometryBufferRendererSceneComponent-nsN5bokt.esm.js","sources":["../../../../../dev/core/dist/Rendering/geometryBufferRendererSceneComponent.js"],"sourcesContent":["import { Scene } from \"../scene\";\nimport { SceneComponentConstants } from \"../sceneComponent\";\nimport { GeometryBufferRenderer } from \"./geometryBufferRenderer\";\nimport { Constants } from \"../Engines/constants\";\nObject.defineProperty(Scene.prototype, \"geometryBufferRenderer\", {\n    get: function () {\n        return this._geometryBufferRenderer;\n    },\n    set: function (value) {\n        if (value && value.isSupported) {\n            this._geometryBufferRenderer = value;\n        }\n    },\n    enumerable: true,\n    configurable: true,\n});\nScene.prototype.enableGeometryBufferRenderer = function (ratio = 1, depthFormat = Constants.TEXTUREFORMAT_DEPTH16, textureTypesAndFormats) {\n    if (this._geometryBufferRenderer) {\n        return this._geometryBufferRenderer;\n    }\n    this._geometryBufferRenderer = new GeometryBufferRenderer(this, ratio, depthFormat, textureTypesAndFormats);\n    if (!this._geometryBufferRenderer.isSupported) {\n        this._geometryBufferRenderer = null;\n    }\n    return this._geometryBufferRenderer;\n};\nScene.prototype.disableGeometryBufferRenderer = function () {\n    if (!this._geometryBufferRenderer) {\n        return;\n    }\n    this._geometryBufferRenderer.dispose();\n    this._geometryBufferRenderer = null;\n};\n/**\n * Defines the Geometry Buffer scene component responsible to manage a G-Buffer useful\n * in several rendering techniques.\n */\nexport class GeometryBufferRendererSceneComponent {\n    /**\n     * Creates a new instance of the component for the given scene\n     * @param scene Defines the scene to register the component in\n     */\n    constructor(scene) {\n        /**\n         * The component name helpful to identify the component in the list of scene components.\n         */\n        this.name = SceneComponentConstants.NAME_GEOMETRYBUFFERRENDERER;\n        this.scene = scene;\n    }\n    /**\n     * Registers the component in a given scene\n     */\n    register() {\n        this.scene._gatherRenderTargetsStage.registerStep(SceneComponentConstants.STEP_GATHERRENDERTARGETS_GEOMETRYBUFFERRENDERER, this, this._gatherRenderTargets);\n    }\n    /**\n     * Rebuilds the elements related to this component in case of\n     * context lost for instance.\n     */\n    rebuild() {\n        // Nothing to do for this component\n    }\n    /**\n     * Disposes the component and the associated resources\n     */\n    dispose() {\n        // Nothing to do for this component\n    }\n    _gatherRenderTargets(renderTargets) {\n        if (this.scene._geometryBufferRenderer) {\n            renderTargets.push(this.scene._geometryBufferRenderer.getGBuffer());\n        }\n    }\n}\nGeometryBufferRenderer._SceneComponentInitialization = (scene) => {\n    // Register the G Buffer component to the scene.\n    let component = scene._getComponent(SceneComponentConstants.NAME_GEOMETRYBUFFERRENDERER);\n    if (!component) {\n        component = new GeometryBufferRendererSceneComponent(scene);\n        scene._addComponent(component);\n    }\n};\n//# sourceMappingURL=geometryBufferRendererSceneComponent.js.map"],"names":[],"mappings":";;;;;;;;AAIA,MAAM,CAAC,cAAc,CAAC,KAAK,CAAC,SAAS,EAAE,wBAAwB,EAAE;AACjE,IAAI,GAAG,EAAE,YAAY;AACrB,QAAQ,OAAO,IAAI,CAAC,uBAAuB;AAC3C,KAAK;AACL,IAAI,GAAG,EAAE,UAAU,KAAK,EAAE;AAC1B,QAAQ,IAAI,KAAK,IAAI,KAAK,CAAC,WAAW,EAAE;AACxC,YAAY,IAAI,CAAC,uBAAuB,GAAG,KAAK;AAChD;AACA,KAAK;AACL,IAAI,UAAU,EAAE,IAAI;AACpB,IAAI,YAAY,EAAE,IAAI;AACtB,CAAC,CAAC;AACF,KAAK,CAAC,SAAS,CAAC,4BAA4B,GAAG,UAAU,KAAK,GAAG,CAAC,EAAE,WAAW,GAAG,SAAS,CAAC,qBAAqB,EAAE,sBAAsB,EAAE;AAC3I,IAAI,IAAI,IAAI,CAAC,uBAAuB,EAAE;AACtC,QAAQ,OAAO,IAAI,CAAC,uBAAuB;AAC3C;AACA,IAAI,IAAI,CAAC,uBAAuB,GAAG,IAAI,sBAAsB,CAAC,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,sBAAsB,CAAC;AAC/G,IAAI,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,WAAW,EAAE;AACnD,QAAQ,IAAI,CAAC,uBAAuB,GAAG,IAAI;AAC3C;AACA,IAAI,OAAO,IAAI,CAAC,uBAAuB;AACvC,CAAC;AACD,KAAK,CAAC,SAAS,CAAC,6BAA6B,GAAG,YAAY;AAC5D,IAAI,IAAI,CAAC,IAAI,CAAC,uBAAuB,EAAE;AACvC,QAAQ;AACR;AACA,IAAI,IAAI,CAAC,uBAAuB,CAAC,OAAO,EAAE;AAC1C,IAAI,IAAI,CAAC,uBAAuB,GAAG,IAAI;AACvC,CAAC;AACD;AACA;AACA;AACA;AACO,MAAM,oCAAoC,CAAC;AAClD;AACA;AACA;AACA;AACA,IAAI,WAAW,CAAC,KAAK,EAAE;AACvB;AACA;AACA;AACA,QAAQ,IAAI,CAAC,IAAI,GAAG,uBAAuB,CAAC,2BAA2B;AACvE,QAAQ,IAAI,CAAC,KAAK,GAAG,KAAK;AAC1B;AACA;AACA;AACA;AACA,IAAI,QAAQ,GAAG;AACf,QAAQ,IAAI,CAAC,KAAK,CAAC,yBAAyB,CAAC,YAAY,CAAC,uBAAuB,CAAC,+CAA+C,EAAE,IAAI,EAAE,IAAI,CAAC,oBAAoB,CAAC;AACnK;AACA;AACA;AACA;AACA;AACA,IAAI,OAAO,GAAG;AACd;AACA;AACA;AACA;AACA;AACA,IAAI,OAAO,GAAG;AACd;AACA;AACA,IAAI,oBAAoB,CAAC,aAAa,EAAE;AACxC,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,uBAAuB,EAAE;AAChD,YAAY,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,uBAAuB,CAAC,UAAU,EAAE,CAAC;AAC/E;AACA;AACA;AACA,sBAAsB,CAAC,6BAA6B,GAAG,CAAC,KAAK,KAAK;AAClE;AACA,IAAI,IAAI,SAAS,GAAG,KAAK,CAAC,aAAa,CAAC,uBAAuB,CAAC,2BAA2B,CAAC;AAC5F,IAAI,IAAI,CAAC,SAAS,EAAE;AACpB,QAAQ,SAAS,GAAG,IAAI,oCAAoC,CAAC,KAAK,CAAC;AACnE,QAAQ,KAAK,CAAC,aAAa,CAAC,SAAS,CAAC;AACtC;AACA,CAAC;;;;"}