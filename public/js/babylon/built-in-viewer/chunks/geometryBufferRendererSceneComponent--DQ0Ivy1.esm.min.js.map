{"version":3,"file":"geometryBufferRendererSceneComponent--DQ0Ivy1.esm.min.js","sources":["../../../../../dev/core/dist/Rendering/geometryBufferRendererSceneComponent.js"],"sourcesContent":["import { Scene } from \"../scene\";\nimport { SceneComponentConstants } from \"../sceneComponent\";\nimport { GeometryBufferRenderer } from \"./geometryBufferRenderer\";\nimport { Constants } from \"../Engines/constants\";\nObject.defineProperty(Scene.prototype, \"geometryBufferRenderer\", {\n    get: function () {\n        return this._geometryBufferRenderer;\n    },\n    set: function (value) {\n        if (value && value.isSupported) {\n            this._geometryBufferRenderer = value;\n        }\n    },\n    enumerable: true,\n    configurable: true,\n});\nScene.prototype.enableGeometryBufferRenderer = function (ratio = 1, depthFormat = Constants.TEXTUREFORMAT_DEPTH16, textureTypesAndFormats) {\n    if (this._geometryBufferRenderer) {\n        return this._geometryBufferRenderer;\n    }\n    this._geometryBufferRenderer = new GeometryBufferRenderer(this, ratio, depthFormat, textureTypesAndFormats);\n    if (!this._geometryBufferRenderer.isSupported) {\n        this._geometryBufferRenderer = null;\n    }\n    return this._geometryBufferRenderer;\n};\nScene.prototype.disableGeometryBufferRenderer = function () {\n    if (!this._geometryBufferRenderer) {\n        return;\n    }\n    this._geometryBufferRenderer.dispose();\n    this._geometryBufferRenderer = null;\n};\n/**\n * Defines the Geometry Buffer scene component responsible to manage a G-Buffer useful\n * in several rendering techniques.\n */\nexport class GeometryBufferRendererSceneComponent {\n    /**\n     * Creates a new instance of the component for the given scene\n     * @param scene Defines the scene to register the component in\n     */\n    constructor(scene) {\n        /**\n         * The component name helpful to identify the component in the list of scene components.\n         */\n        this.name = SceneComponentConstants.NAME_GEOMETRYBUFFERRENDERER;\n        this.scene = scene;\n    }\n    /**\n     * Registers the component in a given scene\n     */\n    register() {\n        this.scene._gatherRenderTargetsStage.registerStep(SceneComponentConstants.STEP_GATHERRENDERTARGETS_GEOMETRYBUFFERRENDERER, this, this._gatherRenderTargets);\n    }\n    /**\n     * Rebuilds the elements related to this component in case of\n     * context lost for instance.\n     */\n    rebuild() {\n        // Nothing to do for this component\n    }\n    /**\n     * Disposes the component and the associated resources\n     */\n    dispose() {\n        // Nothing to do for this component\n    }\n    _gatherRenderTargets(renderTargets) {\n        if (this.scene._geometryBufferRenderer) {\n            renderTargets.push(this.scene._geometryBufferRenderer.getGBuffer());\n        }\n    }\n}\nGeometryBufferRenderer._SceneComponentInitialization = (scene) => {\n    // Register the G Buffer component to the scene.\n    let component = scene._getComponent(SceneComponentConstants.NAME_GEOMETRYBUFFERRENDERER);\n    if (!component) {\n        component = new GeometryBufferRendererSceneComponent(scene);\n        scene._addComponent(component);\n    }\n};\n//# sourceMappingURL=geometryBufferRendererSceneComponent.js.map"],"names":["Object","defineProperty","Scene","prototype","get","this","_geometryBufferRenderer","set","value","isSupported","enumerable","configurable","enableGeometryBufferRenderer","ratio","depthFormat","Constants","TEXTUREFORMAT_DEPTH16","textureTypesAndFormats","GeometryBufferRenderer","disableGeometryBufferRenderer","dispose","GeometryBufferRendererSceneComponent","constructor","scene","name","SceneComponentConstants","NAME_GEOMETRYBUFFERRENDERER","register","_gatherRenderTargetsStage","registerStep","STEP_GATHERRENDERTARGETS_GEOMETRYBUFFERRENDERER","_gatherRenderTargets","rebuild","renderTargets","push","getGBuffer","_SceneComponentInitialization","component","_getComponent","_addComponent"],"mappings":"oWAIAA,OAAOC,eAAeC,EAAMC,UAAW,yBAA0B,CAC7DC,IAAK,WACD,OAAOC,KAAKC,uBACf,EACDC,IAAK,SAAUC,GACPA,GAASA,EAAMC,cACfJ,KAAKC,wBAA0BE,EAEtC,EACDE,YAAY,EACZC,cAAc,IAElBT,EAAMC,UAAUS,6BAA+B,SAAUC,EAAQ,EAAGC,EAAcC,EAAUC,sBAAuBC,GAC/G,OAAIZ,KAAKC,0BAGTD,KAAKC,wBAA0B,IAAIY,EAAuBb,KAAMQ,EAAOC,EAAaG,GAC/EZ,KAAKC,wBAAwBG,cAC9BJ,KAAKC,wBAA0B,OAJxBD,KAAKC,uBAOpB,EACAJ,EAAMC,UAAUgB,8BAAgC,WACvCd,KAAKC,0BAGVD,KAAKC,wBAAwBc,UAC7Bf,KAAKC,wBAA0B,KACnC,EAKO,MAAMe,EAKT,WAAAC,CAAYC,GAIRlB,KAAKmB,KAAOC,EAAwBC,4BACpCrB,KAAKkB,MAAQA,CACrB,CAII,QAAAI,GACItB,KAAKkB,MAAMK,0BAA0BC,aAAaJ,EAAwBK,gDAAiDzB,KAAMA,KAAK0B,qBAC9I,CAKI,OAAAC,GAEJ,CAII,OAAAZ,GAEJ,CACI,oBAAAW,CAAqBE,GACb5B,KAAKkB,MAAMjB,yBACX2B,EAAcC,KAAK7B,KAAKkB,MAAMjB,wBAAwB6B,aAElE,EAEAjB,EAAuBkB,8BAAiCb,IAEpD,IAAIc,EAAYd,EAAMe,cAAcb,EAAwBC,6BACvDW,IACDA,EAAY,IAAIhB,EAAqCE,GACrDA,EAAMgB,cAAcF"}