{"version":3,"file":"iblCdfGeneratorSceneComponent-Dlq2EsVc.esm.min.js","sources":["../../../../../dev/core/dist/Rendering/iblCdfGeneratorSceneComponent.js"],"sourcesContent":["import { Scene } from \"../scene\";\nimport { SceneComponentConstants } from \"../sceneComponent\";\nimport { IblCdfGenerator } from \"./iblCdfGenerator\";\nObject.defineProperty(Scene.prototype, \"iblCdfGenerator\", {\n    get: function () {\n        return this._iblCdfGenerator;\n    },\n    set: function (value) {\n        if (value) {\n            this._iblCdfGenerator = value;\n        }\n    },\n    enumerable: true,\n    configurable: true,\n});\nScene.prototype.enableIblCdfGenerator = function () {\n    if (this._iblCdfGenerator) {\n        return this._iblCdfGenerator;\n    }\n    this._iblCdfGenerator = new IblCdfGenerator(this);\n    if (!this._iblCdfGenerator.isSupported) {\n        this._iblCdfGenerator = null;\n        return null;\n    }\n    if (this.environmentTexture) {\n        this._iblCdfGenerator.iblSource = this.environmentTexture;\n    }\n    return this._iblCdfGenerator;\n};\nScene.prototype.disableIblCdfGenerator = function () {\n    if (!this._iblCdfGenerator) {\n        return;\n    }\n    this._iblCdfGenerator.dispose();\n    this._iblCdfGenerator = null;\n};\n/**\n * Defines the IBL CDF Generator scene component responsible for generating CDF maps for a given IBL.\n */\nexport class IblCdfGeneratorSceneComponent {\n    /**\n     * Creates a new instance of the component for the given scene\n     * @param scene Defines the scene to register the component in\n     */\n    constructor(scene) {\n        /**\n         * The component name helpful to identify the component in the list of scene components.\n         */\n        this.name = SceneComponentConstants.NAME_IBLCDFGENERATOR;\n        this._newIblObserver = null;\n        this.scene = scene;\n    }\n    /**\n     * Registers the component in a given scene\n     */\n    register() {\n        this._updateIblSource();\n        this._newIblObserver = this.scene.onEnvironmentTextureChangedObservable.add(this._updateIblSource.bind(this));\n    }\n    /**\n     * Rebuilds the elements related to this component in case of\n     * context lost for instance.\n     */\n    rebuild() {\n        // Nothing to do for this component\n    }\n    /**\n     * Disposes the component and the associated resources\n     */\n    dispose() {\n        this.scene.onEnvironmentTextureChangedObservable.remove(this._newIblObserver);\n    }\n    _updateIblSource() {\n        if (this.scene.iblCdfGenerator && this.scene.environmentTexture) {\n            this.scene.iblCdfGenerator.iblSource = this.scene.environmentTexture;\n        }\n    }\n}\nIblCdfGenerator._SceneComponentInitialization = (scene) => {\n    // Register the CDF generator component to the scene.\n    let component = scene._getComponent(SceneComponentConstants.NAME_IBLCDFGENERATOR);\n    if (!component) {\n        component = new IblCdfGeneratorSceneComponent(scene);\n        scene._addComponent(component);\n    }\n};\n//# sourceMappingURL=iblCdfGeneratorSceneComponent.js.map"],"names":["Object","defineProperty","Scene","prototype","get","this","_iblCdfGenerator","set","value","enumerable","configurable","enableIblCdfGenerator","IblCdfGenerator","isSupported","environmentTexture","iblSource","disableIblCdfGenerator","dispose","IblCdfGeneratorSceneComponent","constructor","scene","name","SceneComponentConstants","NAME_IBLCDFGENERATOR","_newIblObserver","register","_updateIblSource","onEnvironmentTextureChangedObservable","add","bind","rebuild","remove","iblCdfGenerator","_SceneComponentInitialization","component","_getComponent","_addComponent"],"mappings":"0JAGAA,OAAOC,eAAeC,EAAMC,UAAW,kBAAmB,CACtDC,IAAK,WACD,OAAOC,KAAKC,gBACf,EACDC,IAAK,SAAUC,GACPA,IACAH,KAAKC,iBAAmBE,EAE/B,EACDC,YAAY,EACZC,cAAc,IAElBR,EAAMC,UAAUQ,sBAAwB,WACpC,OAAIN,KAAKC,iBACED,KAAKC,kBAEhBD,KAAKC,iBAAmB,IAAIM,EAAgBP,MACvCA,KAAKC,iBAAiBO,aAIvBR,KAAKS,qBACLT,KAAKC,iBAAiBS,UAAYV,KAAKS,oBAEpCT,KAAKC,mBANRD,KAAKC,iBAAmB,KACjB,MAMf,EACAJ,EAAMC,UAAUa,uBAAyB,WAChCX,KAAKC,mBAGVD,KAAKC,iBAAiBW,UACtBZ,KAAKC,iBAAmB,KAC5B,EAIO,MAAMY,EAKT,WAAAC,CAAYC,GAIRf,KAAKgB,KAAOC,EAAwBC,qBACpClB,KAAKmB,gBAAkB,KACvBnB,KAAKe,MAAQA,CACrB,CAII,QAAAK,GACIpB,KAAKqB,mBACLrB,KAAKmB,gBAAkBnB,KAAKe,MAAMO,sCAAsCC,IAAIvB,KAAKqB,iBAAiBG,KAAKxB,MAC/G,CAKI,OAAAyB,GAEJ,CAII,OAAAb,GACIZ,KAAKe,MAAMO,sCAAsCI,OAAO1B,KAAKmB,gBACrE,CACI,gBAAAE,GACQrB,KAAKe,MAAMY,iBAAmB3B,KAAKe,MAAMN,qBACzCT,KAAKe,MAAMY,gBAAgBjB,UAAYV,KAAKe,MAAMN,mBAE9D,EAEAF,EAAgBqB,8BAAiCb,IAE7C,IAAIc,EAAYd,EAAMe,cAAcb,EAAwBC,sBACvDW,IACDA,EAAY,IAAIhB,EAA8BE,GAC9CA,EAAMgB,cAAcF"}